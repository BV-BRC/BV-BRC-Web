<form dojoAttachPoint="containerNode" class="PanelForm App ${baseClass}" dojoAttachEvent="onreset:_onReset,onsubmit:_onSubmit">
  <div class="appTemplate">
    <div class="appTitle">
      <span class="breadcrumb">Services</span>
      <h3>${applicationLabel}
        <div name="overview" class="infobox iconbox infobutton dialoginfo">
          <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
        </div>
        <div class="infobox iconbox tutorialButton tutorialInfo">
          <a href="${docsServiceURL}${tutorialLink}" target="_blank" ><i class="fa icon-books fa-1x" title="click to open tutorial"></i></a>
        </div>
        <div class="infobox iconbox videoButton videoInfo">
          <a href="${videoLink}" target="_blank" ><i class="fa icon-play-circle fa-1x" title="click to open the video tutorial"></i></a>
        </div>
      </h3>
      <p>
        ${applicationDescription} For further explanation, please see the ${applicationLabel} Service <a href="${docsServiceURL}${applicationHelp}" target="_blank">Quick Reference Guide</a>, <a href="${docsServiceURL}${tutorialLink}" target="_blank">Tutorial</a> and <a href="${videoLink}" target="_blank">Instructional Video</a>.
      </p>
    </div>
    <div class="formFieldsContainer">
      <div style="display: none;">
        <input data-dojo-type="dijit/form/NumberTextBox" value="0" required="true" data-dojo-attach-point="numlibs" data-dojo-props="constraints:{min:1,max:1000}," />
      </div>
      <div id="startWithBox" style="width:400px;" class="appBox appShadow">
        <div class="headerrow">
          <label class="appBoxLabel">Start With:</label>
          <div name="start-with" class="infobox iconbox infobutton dialoginfo">
            <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
          </div>
        </div>
        <div class="appRow">
          <input type="radio" data-dojo-type="dijit/form/RadioButton" data-dojo-attach-point="startWithRead" name="startWith" value="read" checked />
          <label for="radio1">Read File</label>
          <input type="radio" data-dojo-type="dijit/form/RadioButton" data-dojo-attach-point="startWithContigs" name="startWith" value="contigs" data-dojo-attach-event="onChange:onStartWithChange" />
          <label for="radio2">Assembled Contigs</label>
        </div>
      </div>
      <table data-dojo-attach-point="readTable" style="width:100%">
        <tr>
          <td>
            <div id="pairedBox" class="appBox appShadow">
              <div class="headerrow">
                <div style="width:85%;display:inline-block;">
                  <label class="appBoxLabel">Input File</label>
                  <div name="read-input-file" class="infobox iconbox infobutton dialoginfo">
                    <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
                  </div>
                </div>
              </div>
              <div class="appRow">
                <div style="width:85%;display:inline-block;">
                  <label class="paramlabel" style="font-weight: bold;">Paired read library</label>
                </div>
                <div style="width:10%;display:inline-block;">
                  <i data-dojo-attach-event="click:onAddPair" class="fa icon-arrow-circle-o-right fa-lg"></i>
                </div>
              </div>
              <div class="appRow">
                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_file1pair" data-dojo-attach-point="read1" style="width:300px" required="false" data-dojo-props="type:['reads'],multi:false,placeHolder:'READ FILE 1'"></div>
              </div>
              <div class="appRow">
                <div data-dojo-attach-point="read2block">
                  <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_file2pair" data-dojo-attach-point="read2" style="width:300px" required="false" data-dojo-props="type:['reads'],multi:false,placeHolder:'READ FILE 2'"></div>
                </div>
              </div>
              <div class="appRow">
                <div style="width:85%;display:inline-block;">
                  <label class="paramlabel" style="font-weight: bold;">Single read library</label>
                </div>
                <div style="width:10%;display:inline-block;"><i data-dojo-attach-event="click:onAddSingle" class="fa icon-arrow-circle-o-right fa-lg"></i></div>
              </div>
              <div class="appRow">
                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_readfile" data-dojo-attach-point="single_end_libsWidget" style="width:285px" required="false" data-dojo-props="type:['reads'],multi:false,placeHolder:'READ FILE'"></div>
              </div>
              <div class="appRow">
                <div style="width:85%;display:inline-block;">
                  <label class="paramlabel" style="font-weight: bold;">SRA run accession</label>  <i data-dojo-attach-point="srr_accession_validation_message"></i>
                </div>
                <div style="width:10%;display:inline-block;"><i data-dojo-attach-event="click:onAddSRR" class="fa icon-arrow-circle-o-right fa-lg"></i></div>
              </div>
              <div class="appRow">
                <div data-dojo-type="dijit/form/ValidationTextBox" data-dojo-attach-point="srr_accession" style="width: 300px" required="false" data-dojo-props="intermediateChanges:true, missingMessage:'You must provide an accession', trim:true, placeHolder:'SRR'"></div>
              </div>
            </div>
          </td>
          <td>
            <div class="appBox appShadow" style="height:213px; width:330px">
              <div class="headerrow">
                <label class="appBoxLabel">Selected libraries</label>
                <div name="selected-libraries" class="infobox iconbox infobutton tooltipinfo">
                  <i class="fa icon-question-circle fa"></i>
                </div>
                <br>
                <div class="appsublabel">Place read files here using the arrow buttons.</div>
              </div>
              <div class="appRow" style="width:100%; margin-top:10px; text-align: center;">
                <table class="librarytable" frame="box" data-dojo-attach-point="libsTable" style="margin:0 0 0 10px; width:90%;">
                  <tbody data-dojo-attach-point="libsTableBody">
                  </tbody>
                </table>
              </div>
            </div>
          </td>
        </tr>
      </table>
      <div data-dojo-attach-point="annotationFileBox" style="width:400px; display:none" class="appBox appShadow">
        <div class="headerrow">
          <div style="width:85%;display:inline-block;">
            <label class="appBoxLabel">Input File</label>
            <div name="contigs" class="infobox iconbox infobutton dialoginfo">
              <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
            </div>
          </div>
        </div>
        <div class="appRow">
            <label class="paramlabel">Contigs</label><br>
            <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="contigs" data-dojo-attach-point="contigsFile" data-dojo-attach-event="onChange:setContigsFile" style="width:100%" required="false" data-dojo-props="type:['contigs'],multi:false,promptMessage:'Select or Upload Contigs to your workspace for Annotation'">
            </div>
        </div>
      </div>
      <div id="parameterBox" style="width:400px; " class="appBox appShadow">
        <div class="headerrow">
          <div style="width:85%;display:inline-block;">
            <label class="appBoxLabel">Parameters</label>
            <div name="parameters" class="infobox iconbox infobutton dialoginfo">
              <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
            </div>
          </div>
        </div>
        <div data-dojo-attach-point="assemblyStrategy" class="appRow">
          <label class="paramlabel" style="font-weight: bold;">Assembly Parameters</label><br>
          <label class="paramlabel">Strategy</label><br>
          <select data-dojo-type="dijit/form/Select" name="recipe" data-dojo-attach-point="recipe" style="width:300px" required="true" data-dojo-attach-event="onChange:onRecipeChange">
            <option value="auto">Auto</option>
            <option value="unicycler">Unicycler</option>
            <option value="spades">SPAdes</option>
            <option value="canu">Canu</option>
            <option value="meta-spades">metaSPAdes</option>
            <option value="plasmid-spades">plasmidSPAdes</option>
            <option value="single-cell">MDA (single-cell)</option>
            <option value="flye">flye</option>
          </select>
        </div>
        <div class="appRow" data-dojo-attach-point="genome_size_block" style="display:none">
          <label class="paramlabel">Estimated Genome Size</label><br>
          <div name="genome_size"
            class="medInput"
            data-dojo-type="dijit/form/NumberTextBox"
            data-dojo-attach-point="genome_size"
            value="5000000">
          </div>
        </div>

        <div data-dojo-attach-point="assembly_additional_parameters_block">
          <div class="appRow">
            <div class="appRowSegment" style="margin: 0 0 0 0;">
              <div data-dojo-attach-point="assembly_adv_menu" style="display:inline-block">
                <label class="largelabel">Advanced</label>
                <div class="iconbox" style="margin-left:0px">
                  <i data-dojo-attach-point="assembly_adv_icon" class="fa icon-caret-down fa-1"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="appRow" data-dojo-attach-point="assembly_adv_row" style="display: none">
            <div class="appRow" style="margin:0 0 0 0">
              <label class="paramlabel">Trim reads before assembly</label><br>
              <select data-dojo-type="dijit/form/Select" name="trim" style="width:50px" data-dojo-attach-point="trim" required="false">
                <option value="true">True</option>
                <option value="false">False</option>
              </select>
            </div>
            <div class="appRowSegment" style="margin:0 0 0 0">
              <label class="paramlabel">Racon Iterations</label><br>
              <div class="insertspinner" name="racon_iter" data-dojo-type="dijit/form/NumberSpinner" data-dojo-attach-point="racon_iter" data-dojo-props="value:2, smallDelta:1, constraints:{min:0,max:4,places:0}, invalidMessage:'Please provide an integer value'"></div>
            </div>
            <div class="appRowSegment" style="margin:10px 0 0 0">
              <label class="paramlabel">Pilon Iterations</label><br>
              <div class="insertspinner" name="pilon_iter" data-dojo-type="dijit/form/NumberSpinner" data-dojo-attach-point="pilon_iter" data-dojo-props="value:2, smallDelta:1, constraints:{min:0,max:4,places:0}, invalidMessage:'Please provide an integer value'"></div>
            </div>
          <div class="appRow" style="margin:0 0 0 0">
            <div class="appRowSegment" style="margin:0 0 0 0">
              <label class="paramlabel">Min. contig length</label><br>
              <div class="insertspinner" name="min_contig_len" data-dojo-type="dijit/form/NumberSpinner" data-dojo-attach-point="min_contig_len" data-dojo-props="value:300, smallDelta:10, constraints:{min:100,max:100000,places:0}, invalidMessage:'Please provide an integer value'"></div>
            </div>
            <div class="appRowSegment" style="margin:10px 0 0 0">
              <label class="paramlabel">Min. contig coverage</label><br>
              <div class="insertspinner" name="min_contig_cov" data-dojo-type="dijit/form/NumberSpinner" data-dojo-attach-point="min_contig_cov" data-dojo-props="value:5, smallDelta:5, constraints:{min:0,max:100000,places:0}, invalidMessage:'Please provide an integer value'"></div>
            </div>
          </div>
          </div>
        </div>

        <div class="appRow">
          <div class="appFieldLong">
            <label class="paramlabel" style="font-weight: bold;">Annotation Parameters</label><br>
            <label class="paramlabel">Annotation Recipe</label><br>
            <select data-dojo-type="dijit/form/Select" name="domain" data-dojo-attach-point="workspaceName" style="width:300px" required="true" data-dojo-props="intermediateChanges:true,missingMessage:'Name Must be provided for Folder',trim:true,placeHolder:'MySubFolder'">
              <option value="Bacteria">Bacteria / Archaea</option>
            </select>
          </div>
        </div>
        <div class="appRow">
          <div class="appRowSegment" style="margin-left: 0px; text-align:left; width:70%">
            <label class="paramlabel">Taxonomy Name</label>
            <div name="taxon-information" class="infobox iconbox infobutton tooltipinfo">
              <i class="fa icon-question-circle fa"></i>
            </div>
            <br>
            <div data-dojo-attach-event="onChange:onSuggestNameChange" data-dojo-type="p3/widget/TaxonNameSelector" name="scientific_name" maxHeight="200" style="width:100%" required="true" data-dojo-attach-point="scientific_nameWidget" data-dojo-props="includeEukaryotes:false,includeBacteria:true,includeViruses:false"></div>
          </div>
          <div class="appRowSegment" style="text-align:left; width:20%">
            <label class="paramlabel">Taxonomy ID</label><br>
            <div data-dojo-attach-event="onChange:onTaxIDChange" data-dojo-type="p3/widget/TaxIDSelector" value="" name="tax_id" maxHeight="200" style="width:100%" required="true" data-dojo-attach-point="tax_idWidget"></div>
          </div>
        </div>
        <div class="appRow">
          <div class="appFieldLong">
            <label class="paramlabel">My Label</label><span class="charError" style="color:red; font-size:8pt; padding-left:10px; font-weight:bold">&nbsp;</span><br>
            <div data-dojo-type="dijit/form/ValidationTextBox" data-dojo-attach-event="onChange:updateOutputName" name="my_label" data-dojo-attach-point="myLabelWidget" style="width: 300px" required="true" data-dojo-props="intermediateChanges:true, missingMessage:'You must provide a label',trim:true,intermediateChanges:true,placeHolder:'My identifier123'"></div>
          </div>
        </div>
        <!-- <div class="appRow">
          <div class="appFieldLong">
            <label class="paramlabel">Genetic Code</label><br>
            <select data-dojo-attach-point="genetic_code" data-dojo-type="dijit/form/Select" name="code" style="width:300px" required="true" data-dojo-props="intermediateChanges:true,missingMessage:'Name Must be provided for Folder',trim:true,placeHolder:'MySubFolder'">
              <option value="11">11 (Archaea & most Bacteria)</option>
              <option value="4">4 (Mycoplasma, Spiroplasma, & Ureaplasma )</option>
              <option value="25">25 (Candidate Division SR1 & Gracilibacteria)</option>
            </select>
          </div>
        </div> -->
        <div class="appRow">
          <div class="appFieldLong" style="width:380px">
            <label class="paramlabel">Output Name</label><br>
            <div data-dojo-attach-point="output_nameWidget" style="width:380px; background-color:#F0F1F3" data-dojo-type="p3/widget/WorkspaceFilenameValidationTextBox" name="output_file" required="true" data-dojo-props="readOnly: true, promptMessage:'The output name for your Annotation Results',missingMessage:'Output Name must be provided.',trim:true,placeHolder:'Taxonomy + My Label'"></div>
          </div>
        </div>
        <div class="appRow">
          <label class="paramlabel">Output Folder</label><br>
          <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="output_path" data-dojo-attach-point="output_path" style="width:300px" required="true" data-dojo-attach-event="onChange:onOutputPathChange" data-dojo-props="title:'Select an Output Folder',autoSelectCurrent:true,selectionText:'Destination',type:['folder'],multi:false"></div>
        </div>
      </div>
    </div>
    <div class="appSubmissionArea">
      <div style="width:400px; margin:auto" class="workingMessage messageContainer">
        Submitting Comprehensive Genome Analysis Job
      </div>
      <div data-dojo-attach-point="submittedMessage" class="messageContainer submittedMessage"
      style="margin-top:10px; text-align:center;" >
        Your job has been submitted successfully. Please visit your <a data-dojo-attach-event="onclick:openJobsList"><u>Jobs List</u> </a>to check the status of your job and access the results.
      </div>
      <div style="width:400px; margin:auto" class="errorMessage messageContainer">
        <div style="font-weight:900;font-size:1.1em;">Error Submitting Comprehensive Genome Analysis Job</div>
        <p data-dojo-attach-point="errorMessage">Error</p>
      </div>
      <div style="margin-top: 10px; text-align:center;">
        <div data-dojo-attach-point="cancelButton" data-dojo-attach-event="onClick:onCancel" data-dojo-type="dijit/form/Button">Cancel
        </div>
        <div data-dojo-attach-point="resetButton" type="reset" data-dojo-type="dijit/form/Button">Reset</div>
        <div data-dojo-attach-point="submitButton" type="submit" data-dojo-type="dijit/form/Button">Submit</div>
      </div>
    </div>
  </div>
</form>
