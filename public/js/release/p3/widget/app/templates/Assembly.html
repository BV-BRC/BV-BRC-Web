<form dojoAttachPoint="containerNode" class="PanelForm App ${baseClass}"
      dojoAttachEvent="onreset:_onReset,onsubmit:_onSubmit,onchange:validate">
    <div class="appTemplate">
        <div class="appTitle">
            <span class="breadcrumb">Services</span>
            <h3>Genome Assembly
              <div name="overview" class="infobox iconbox infobutton dialoginfo">
                  <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
              </div>
              <div class="infobox iconbox tutorialButton tutorialInfo">
                  <i class="fa icon-books fa-1x" title="click to open tutorial"></i>
              </div>
            </h3>
            <p>Assemble contigs from sequencing reads.</p>
        </div>
        <div class="formFieldsContainer">
            <div style="display: none;">
                <input data-dojo-type="dijit/form/NumberTextBox" value="0" required="true"
                       data-dojo-attach-point="numlibs" data-dojo-props="constraints:{min:1,max:1000},"/>
            </div>
            <table class="assemblyblocks" style="width:100%">
                <tr>
                    <td>
                        <div id="pairedBox" class="appBox appShadow">
                            <div class="headerrow">
                                <div style="width:85%;display:inline-block;">
                                    <label class="appBoxLabel"> Paired read library</label>
                                    <div name="paired-read-library" class="infobox iconbox infobutton dialoginfo">
                                        <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
                                    </div>
                                </div>
                                <div style="width:10%;display:inline-block;">
                                    <i data-dojo-attach-event="click:onAddPair" class="fa icon-arrow-circle-o-right fa-lg"></i>
                                </div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Read File 1</label><br>
                                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_file1pair"
                                     data-dojo-attach-point="read1" style="width:300px" required="false"
                                     data-dojo-props="type:['reads'],multi:false"></div>
                            </div>
                            <div class="appRow">
                                <div data-dojo-attach-point="read2block">
                                    <label class="paramlabel">Read File 2</label><br>
                                    <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_file2pair"
                                         data-dojo-attach-point="read2" style="width:300px" required="false"
                                         data-dojo-props="type:['reads'],multi:false"></div>
                                </div>
                            </div>
                            <div class="appRow">
                                <div class="appRowSegment" data-dojo-attach-point="advanced">
                                    <label class="largelabel">Advanced</label>
                                    <div class="iconbox" style="margin-left:0px">
                                        <i data-dojo-attach-point="advicon" class="fa icon-caret-down fa-1"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="appRow" data-dojo-attach-point="advrow" style="display: none">
                                <div class="appRowSegment" style="margin:0 0 0 0">
                                    <label class="paramlabel">File 1 Interleaved</label><br>
                                    <select data-dojo-type="dijit/form/Select" name="libdat_interleaved"
                                            data-dojo-attach-point="interleaved" required="false"
                                            data-dojo-props="intermediateChanges:true,missingMessage:'Name Must be provided for Folder',trim:true,placeHolder:'MySubFolder'">
                                        <option value="false">False</option>
                                        <option value="true">True</option>
                                    </select>
                                </div>
                                <div class="appRowSegment">
                                    <label class="paramlabel">Mean Insert Size</label><br>
                                    <div class="insertspinner" name="libdat_avginsert"
                                         data-dojo-type="dijit/form/NumberSpinner"
                                         data-dojo-attach-point="insert_size_mean"
                                         data-dojo-props="smallDelta:10, constraints:{min:10,max:2000,places:0}"></div>
                                </div>
                                <div class="appRowSegment">
                                    <label class="paramlabel">Std. Insert Size</label><br>
                                    <div class="insertspinner" name="libdat_stdinsert"
                                         data-dojo-type="dijit/form/NumberSpinner"
                                         data-dojo-attach-point="insert_size_stdev"
                                         data-dojo-props="smallDelta:10, constraints:{min:10,max:2000,places:0}"></div>
                                </div>
                                <div class="appRow" data-dojo-attach-point="advrow2">
                                    <div class="appRowSegment" style="margin:0 0 0 0">
                                        <label class="paramlabel">Mate paired</label><br>
                                        <select data-dojo-type="dijit/form/Select" name="read_orientation_outward"
                                                data-dojo-attach-point="read_orientation_outward" required="false"
                                                data-dojo-props="intermediateChanges:true,missingMessage:'',trim:true,placeHolder:''">
                                            <option value="false">False</option>
                                            <option value="true">True</option>
                                        </select>
                                    </div>
                                    <div class="appRowSegment" style="margin:10px 0 0 0">
                                        <label class="paramlabel">Platform</label><br>
                                        <select data-dojo-type="dijit/form/Select" name="paired_platform"
                                                data-dojo-attach-point="paired_platform" required="false"
                                                data-dojo-props="intermediateChanges:true,missingMessage:'',trim:true,placeHolder:''">
                                            <option value="infer">Infer Platform</option>
                                            <option value="illumina">Illumina</option>
                                            <option value="pacbio">PacBio</option>
                                            <option value="nanopore">Nanopore</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="appBox appShadow">
                            <div class="headerrow">
                                <div style="width:85%;display:inline-block;">
                                    <label class="appBoxLabel">Single read library</label>
                                </div>
                                <div style="width:10%;display:inline-block;"><i
                                        data-dojo-attach-event="click:onAddSingle"
                                        class="fa icon-arrow-circle-o-right fa-lg"></i></div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Read File</label><br>
                                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="libdat_readfile"
                                     data-dojo-attach-point="single_end_libs" style="width:300px" required="false"
                                     data-dojo-props="type:['reads'],multi:false"></div>
                            </div>
                            <div class="appRow">
                                <div class="appRowSegment" data-dojo-attach-point="advanced3">
                                    <label class="largelabel">Advanced</label>
                                    <div class="iconbox" style="margin-left:0px">
                                        <i data-dojo-attach-point="advicon3" class="fa icon-caret-down fa-1"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="appRow" data-dojo-attach-point="advrow3" style="display: none">
                                <div class="appRowSegment" style="margin:0 0 0 0">
                                    <label class="paramlabel">Platform</label><br>
                                    <select data-dojo-type="dijit/form/Select" name="single_platform"
                                            data-dojo-attach-point="single_platform" required="false"
                                            data-dojo-props="intermediateChanges:true,missingMessage:'',trim:true,placeHolder:''">
                                        <option value="infer">Infer Platform</option>
                                        <option value="illumina">Illumina</option>
                                        <option value="pacbio">PacBio</option>
                                        <option value="nanopore">Nanopore</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="appBox appShadow">
                            <div class="headerrow">
                                <div style="width:85%;display:inline-block;">
                                    <label class="appBoxLabel">SRA run accession</label>
                                </div>
                                <div style="width:10%;display:inline-block;"><i
                                        data-dojo-attach-event="click:onAddSRR"
                                        class="fa icon-arrow-circle-o-right fa-lg"></i></div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">SRR Accession</label><br>
                                <div data-dojo-type="dijit/form/ValidationTextBox"
                                    data-dojo-attach-event="onChange:updateSRR"
                                    data-dojo-attach-point="srr_accession" style="width: 300px" required="false"
                                    data-dojo-props="intermediateChanges:true, missingMessage:'You must provide an accession', trim:true, placeHolder:'SRR'"></div>
                                </div>
                        </div>

                        <div class="appBox appShadow">
                            <div class="headerrow">
                                <label class="appBoxLabel">Parameters</label>
                                <div name="parameters" class="infobox iconbox infobutton dialoginfo">
                                    <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
                                </div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Assembly Strategy</label><br>
                                <select data-dojo-type="dijit/form/Select" name="recipe" data-dojo-attach-point="recipe"
                                        style="width:300px" required="true"
                                        data-dojo-props="intermediateChanges:true,missingMessage:'Name Must be provided for Folder',trim:true,placeHolder:'MySubFolder'">
                                    <option value="auto">auto</option>
                                    <option value="fast">fast</option>
                                    <option value="full_spades">full spades</option>
                                    <option value="kiki">kiki</option>
                                    <option value="miseq">miseq</option>
                                    <option value="plasmid">plasmid</option>
                                    <option value="smart">smart</option>
                                </select>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Output Folder</label><br>
                                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="output_path"
                                     data-dojo-attach-point="output_path" style="width:300px" required="true"
                                     data-dojo-props="type:['folder'],multi:false"
                                     data-dojo-attach-event="onChange:onOutputPathChange"></div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Output Name</label><br>
                                <div data-dojo-type="p3/widget/WorkspaceFilenameValidationTextBox" name="output_file"
                                     data-dojo-attach-point="output_file" style="width:300px" required="true"
                                     data-dojo-props="intermediateChanges:true,missingMessage:'Name must be provided for the job result',trim:true,placeHolder:'Output Name'"></div>
                            </div>
                            <div class="appRow">
                                <label class="paramlabel">Benchmark Contigs</label><br>
                                <div data-dojo-type="p3/widget/WorkspaceObjectSelector" name="reference_assembly"
                                     data-dojo-attach-point="reference_assembly" style="width:300px" required="false"
                                     data-dojo-props="type:['contigs'],multi:false,placeHolder:'Optional'"></div>
                            </div>
                            <div class="appRow">
                                <div class="appRowSegment">
                                    <div data-dojo-attach-point="advanced2" style="display:inline-block">
                                        <label class="largelabel">Advanced</label>
                                        <div class="iconbox" style="margin-left:0px">
                                            <i data-dojo-attach-point="advicon2" class="fa icon-caret-down fa-1"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="appRow" data-dojo-attach-point="advrow2" style="display: none">
                                <div class="appField">
                                    <label class="paramlabel">Assembly pipeline arguments</label>
                                    <div name="advanced" class="infobox iconbox infobutton dialoginfo">
                                        <i class="fa icon-info-circle fa" title="click to open info dialog"></i>
                                    </div>
                                    <div data-dojo-type="dijit/form/ValidationTextBox" name="pipeline"
                                         style="width:100%" required="false"
                                         data-dojo-props="intermediateChanges:true,promptMessage:'Advanced assembly pipeline arguments that overrides recipe.',missingMessage:'',trim:true,placeHolder:'Arguments override recipe'"></div>
                                </div>
                                <div class="appRow" style="margin:0 0 0 0">
                                    <div class="appRowSegment" style="margin:0 0 0 0">
                                        <label class="paramlabel">Min. contig length</label><br>
                                        <div class="insertspinner" name="min_contig_len"
                                             data-dojo-type="dijit/form/NumberSpinner"
                                             data-dojo-attach-point="min_contig_len"
                                             data-dojo-props="value:300, smallDelta:10, constraints:{min:100,max:100000,places:0}"></div>
                                    </div>
                                    <div class="appRowSegment" style="margin:10px 0 0 0">
                                        <label class="paramlabel">Min. contig coverage</label><br>
                                        <div class="insertspinner" name="min_contig_cov"
                                             data-dojo-type="dijit/form/NumberSpinner"
                                             data-dojo-attach-point="min_contig_cov"
                                             data-dojo-props="value:5, smallDelta:5, constraints:{min:0,max:100000,places:1}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="appBox appShadow" style="height:379px; width:330px">
                            <div class="headerrow">
                                <label class="appBoxLabel">Selected libraries</label>
                                <div name="selected-libraries" class="infobox iconbox infobutton tooltipinfo">
                                    <i class="fa icon-question-circle fa"></i>
                                </div>
                                <br>
                                <div class="appsublabel">Place read files here using the arrow buttons.</div>
                            </div>
                            <div class="appRow" style="width:100%; margin-top:10px; text-align: center;">
                                <table class="librarytable" frame="box" data-dojo-attach-point="libsTable"
                                       style='margin:0 0 0 10px; width:90%;'>
                                    <tbody data-dojo-attach-point="libsTableBody">

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="appSubmissionArea">
            <div style="width:400px; margin:auto" class="workingMessage messageContainer">
                Submitting Assembly Job
            </div>

            <div style="width:400px; margin:auto" class="submittedMessage messageContainer">
                Assembly Job has been queued.
            </div>

            <div style="width:400px; margin:auto" class="errorMessage messageContainer">
                <div style="font-weight:900;font-size:1.1em;">Error Submitting Assembly Job</div>
                <p data-dojo-attach-point="errorMessage">Error</p>
            </div>

            <div style="margin-top: 10px; text-align:center;">
                <div data-dojo-attach-point="cancelButton" data-dojo-attach-event="onClick:onCancel"
                     data-dojo-type="dijit/form/Button">Cancel
                </div>
                <div data-dojo-attach-point="resetButton" type="reset" data-dojo-type="dijit/form/Button">Reset</div>
                <div data-dojo-attach-point="submitButton" type="submit" data-dojo-type="dijit/form/Button">Assemble
                </div>
            </div>
        </div>
    </div>
</form>
