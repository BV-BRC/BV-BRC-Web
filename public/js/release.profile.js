var profile = {
  basePath: './',
  layerOptimize: 'closure',
  optimizeOptions: {
    languageIn: 'ECMASCRIPT_2018',
    languageOut: 'ECMASCRIPT_2018',
    compilationLevel: 'SIMPLE'
  },
  cssOptimize: 'comments.keepLines',
  releaseDir: './release',
  stripConsole: 'all',
  mini: true,
  hasReport: true,
  selectorEngine: 'lite',
  staticHasFeatures: {
    'dojo-firebug': false,
    'dojo-debug-messages': true,
    'dojo-trace-api': false,
    'dojo-log-api': true,
    'async': true
  },
  plugins: {
    'xstyle/css': 'xstyle/build/amd-css'
  },
  // Load external dependency stubs to prevent build errors
  deps: [
    'p3/ExternalDependencyStubs'
  ],
  packages: [
    { name: 'dojo', location: './dojo' },
    { name: 'dijit', location: './dijit' },
    { name: 'dojox', location: './dojox' },
    { name: 'p3', location: './p3' },
    { name: 'dgrid', location: './dgrid' },
    { name: 'put-selector', location: './put-selector' },
    { name: 'xstyle', location: './xstyle' },
    { name: 'dbind', location: './dbind' },
    { name: 'rql', location: './rql' },
    { name: 'JBrowse', location: './JBrowse' },
    { name: 'jszlib', location: './jszlib' },
    { name: 'FileSaver', location: './FileSaver', main: 'FileSaver' },
    { name: 'circulus', location: './circulus' },
    { name: 'lazyload', location: './lazyload/', main: 'lazyload' },
    { name: 'jDataView', location: './jDataView/src', main: 'jdataview' },
    { name: 'd3', location: './d3' },
    { name: 'd3.v5', location: './d3.v5' },
    { name: 'phyloview', location: './phyloview' },
    { name: 'cytoscape-panzoom', location:'./cytoscape-panzoom' },
    { name: 'cytoscape-context-menus', location:'./cytoscape-context-menus' },
    { name: 'cytoscape-cola', location:'./cytoscape-cola' },
    { name: 'cytoscape-dagre', location:'./cytoscape-dagre' },
    { name: 'heatmap', location:'./heatmap' },
    { name: 'msa', location: './msa/dist', main: 'msa.min' }
  ],
  layers: {
    'p3/layer/core': {
      include: [
        'p3/app/p3app',
        'p3/panels',
        'dijit/layout/BorderContainer',
        'put-selector/put',
        'dijit/_base',
        'dijit/InlineEditBox',
        'dijit/form/ComboButton',
        'dijit/form/RadioButton',
        'dijit/CheckedMenuItem',
        'dojo/dnd/AutoSource',
        'p3/widget/TooltipDialog',
        'dijit/PopupMenuItem',
        'dijit/MenuSeparator',
        'p3/widget/GlobalSearch',
        'p3/widget/WorkspaceManager',
        'p3/widget/SelectionToGroup',
        'dojo/fx/Toggler',
        'p3/widget/JobStatus',
        'dojo/data/util/simpleFetch',
        'p3/widget/HierarchicalTrackList',
        'dijit/Toolbar',
        'dijit/ToolbarSeparator',
        'jDataView',
        'dojo/parser',
        'dijit/form/Form',
        'dijit/form/TextBox',
        'dijit/form/Button',
        'dojox/validate/web',
        'dijit/form/DropDownButton',
        'dijit/_base/manager',
        'dijit/_base',
        'dijit/WidgetSet',
        'dijit/selection',
        'dijit/form/ComboButton',
        'dijit/form/ToggleButton',
        'p3/GlobalWorkspace',
        'p3/widget/CreateFolder',
        'p3/widget/CreateWorkspace',
        'p3/widget/Uploader',
        "p3/widget/TaxonNameSelector",
        "p3/widget/GenomeNameSelector",
        "p3/widget/TaxIDSelector",
        'dojox/dtl/_Templated',
        'dojox/dtl/_base',
        'dojox/string/tokenize',
        'dojox/string/Builder',
        "p3/widget/WorkspaceObjectSelector",
        "dijit/form/FilteringSelect",
        "p3/widget/TooltipDialog",
        "p3/widget/GlobalSearch",
        "dijit/form/Select",
        "p3/widget/JobStatus"
      ],
      exclude: ["rql/js-array"]
    },

    'p3/layer/viewers': {
      include: [
        'dojox/gfx/svg',
        'dojox/gfx/path',
        'p3/widget/viewer/Base',
        'p3/widget/viewer/TabViewerBase',
        'p3/widget/TabContainer',
        'p3/widget/formatter',
        'p3/widget/DataItemFormatter',
        'p3/widget/ActionBar',
        'p3/widget/FilterContainerActionBar',
        'p3/widget/ItemDetailPanel',
        'p3/widget/SelectionToGroup',
        'p3/widget/PerspectiveToolTip',
        'p3/widget/ProteinFeatureSummary',
        'p3/widget/GenomeOverview',
        'p3/widget/FeatureOverview',
        'p3/widget/GenomeBrowser',
        'p3/widget/CircularViewerContainer',
        'p3/widget/ProteinFamiliesContainer',
        'p3/widget/PathwaysContainer',
        'p3/widget/SubSystemsContainer',
        'p3/widget/ExperimentsContainer',
        'p3/widget/Phylogeny',
        'p3/widget/TaxonomyOverview',
        'dojox/widget/Standby',
        'dijit/MenuItem',
        'dijit/TooltipDialog',
        'dijit/popup',
        'dojox/xml/DomParser',
        'dojox/dtl/_Templated',
        'dojox/dtl/_base',
        'dojox/string/tokenize',
        'dojox/string/Builder',
        'phyloview/TreeNavSVG',
        'FileSaver'
      ],
      exclude: ["p3/layer/core","p3/layer/jbrowse","p3/layer/grids"]
    },
    'p3/layer/jbrowse': {
      include: [
        'JBrowse/ConfigAdaptor/conf',
        'JBrowse/ConfigAdaptor/JB_json_v1',
        'JBrowse/Plugin',
        'JBrowse/Store/TrackMetaData',
        'JBrowse/View/TrackList/Hierarchical',
        'JBrowse/View/TrackList/_TextFilterMixin',
        'JBrowse/Store/SeqFeature/REST',
        'JBrowse/Store/SeqFeature',
        'JBrowse/Store',
        'JBrowse/Model/SimpleFeature',
        'JBrowse/View/Track/HTMLFeatures',
        'JBrowse/View/Ruler',
        'JBrowse/View/FASTA'

      ],
      exclude: ["p3/layer/core"]
    },
    'p3/layer/outbreaks': {
      include: [
        'p3/widget/outbreaks/Mpox/index',
        'dojox/xml/DomParser',
        'p3/widget/outbreaks/OutbreaksOverview',
        'p3/widget/outbreaks/OutbreaksTab',
        'p3/widget/outbreaks/OutbreaksTabContainer',
        'p3/widget/outbreaks/OutbreaksPhylogenyTreeViewer',
        'p3/widget/outbreaks/OutbreaksGeoMap',
        'p3/widget/outbreaks/OutbreaksGeoMapInfo'
      ],
      exclude: ["p3/layer/core"]
    },
    'p3/layer/search': {
      include: [
        "p3/widget/AdvancedSearch",
        "p3/widget/search/GenomeSearch",
        "p3/widget/search/AntibioticSearch",
        "p3/widget/search/DomainAndMotifSearch",
        "p3/widget/search/EpitopeSearch",
        "p3/widget/search/GenomicFeatureSearch",
        "p3/widget/search/GenomicSequenceSearch",
        "p3/widget/search/HostGroups",
        "p3/widget/search/PathogenGroups",
        "p3/widget/search/PathwaySearch",
        "p3/widget/search/ProteinSearch",
        "p3/widget/search/ProteinStructureSearch",
        "p3/widget/search/SerologySearch",
        "p3/widget/search/SFVTSearch",
        "p3/widget/search/SpecialtyGeneSearch",
        "p3/widget/search/StrainPathogenGroups",
        "p3/widget/search/StrainSearch",
        "p3/widget/search/SubsystemSearch",
        "p3/widget/search/SurveillanceSearch",
        "p3/widget/search/TaxaSearch",
        "p3/widget/search/TranscriptomicExperimentSearch"
      ],
      exclude: ["p3/layer/core"]
    },
    "p3/layer/apps": {
      include: [
        "p3/widget/app/Annotation",
        "p3/widget/app/AppBase",
        "p3/widget/app/Assembly",
        "p3/widget/app/Assembly2",
        "p3/widget/app/BLAST",
        "p3/widget/app/CEIRRDataSubmission",
        "p3/widget/app/ComparativePathway",
        "p3/widget/app/ComparativeSystems",
        "p3/widget/app/ComprehensiveGenomeAnalysis",
        "p3/widget/app/ComprehensiveSARS2Analysis",
        "p3/widget/app/CoreGenomeMLST",
        "p3/widget/app/Date",
        "p3/widget/app/Docking",
        "p3/widget/app/Expression",
        "p3/widget/app/FastqUtil",
        "p3/widget/app/FunctionalClassification",
        "p3/widget/app/GeneTree",
        "p3/widget/app/GenomeAlignment",
        "p3/widget/app/GenomeDistance",
        "p3/widget/app/HASubtypeNumberingConversion",
        "p3/widget/app/Homology",
        "p3/widget/app/IDMapper",
        "p3/widget/app/MetaCATS",
        "p3/widget/app/MetagenomicBinning",
        "p3/widget/app/MetagenomicReadMapping",
        "p3/widget/app/MobileElementDetection",
        "p3/widget/app/MSA",
        "p3/widget/app/PhylogeneticTree",
        "p3/widget/app/PrimerDesign",
        "p3/widget/app/ProteinFamily",
        "p3/widget/app/Reconstruct",
        "p3/widget/app/Rnaseq",
        "p3/widget/app/SARS2Wastewater",
        "p3/widget/app/SeqComparison",
        "p3/widget/app/SeqSimilarity",
        "p3/widget/app/SequenceSubmission",
        "p3/widget/app/SimpleAnnotation",
        "p3/widget/app/SubspeciesClassification",
        "p3/widget/app/TaxonomicClassification",
        "p3/widget/app/Tnseq",
        "p3/widget/app/TreeSort",
        "p3/widget/app/Variation",
        "p3/widget/app/ViralAssembly",
        "p3/widget/app/ViralGenomeTree",
        "p3/widget/app/WholeGenomeSNPAnalysis"
      ],
      exclude: ["p3/layer/core","p3/layer/viewers","p3/layer/jbrowse"]
    },
    "p3/layer/grids": {
      include: [
        "p3/widget/Grid",
        "p3/widget/GridContainer",
        "p3/widget/GridCopyToClipboard",
        "p3/widget/GridSelector",
        "p3/widget/PageGrid",
        "p3/widget/AMRPanelGrid",
        "p3/widget/AMRPanelGridContainer",
        "p3/widget/AntibioticGrid",
        "p3/widget/AntibioticGridContainer",
        "p3/widget/BiosetGrid",
        "p3/widget/BiosetGridContainer",
        "p3/widget/BiosetResultFilterGrid",
        "p3/widget/BiosetResultGrid",
        "p3/widget/BiosetResultGridContainer",
        "p3/widget/BlastResultGrid",
        "p3/widget/BlastResultGridContainer",
        "p3/widget/CorrelatedGenesGrid",
        "p3/widget/CorrelatedGenesGridContainer",
        "p3/widget/EpitopeAssayGrid",
        "p3/widget/EpitopeAssayGridContainer",
        "p3/widget/EpitopeGrid",
        "p3/widget/EpitopeGrid2",
        "p3/widget/EpitopeGridContainer",
        "p3/widget/ExperimentGrid",
        "p3/widget/ExperimentGridContainer",
        "p3/widget/FeatureGrid",
        "p3/widget/FeatureGridContainer",
        "p3/widget/GeneExpressionGrid",
        "p3/widget/GeneExpressionGridContainer",
        "p3/widget/GenomeDistanceResultGrid",
        "p3/widget/GenomeDistanceResultGridContainer",
        "p3/widget/GenomeGrid",
        "p3/widget/GenomeGridContainer",
        "p3/widget/HomologyResultGrid",
        "p3/widget/HomologyResultGridContainer",
        "p3/widget/IDMappingAppResultGrid",
        "p3/widget/IDMappingAppResultGridContainer",
        "p3/widget/IDMappingGrid",
        "p3/widget/IDMappingGridContainer",
        "p3/widget/InteractionGrid",
        "p3/widget/InteractionGridContainer",
        "p3/widget/JobsGrid",
        "p3/widget/MetaCATSGrid",
        "p3/widget/PathwayGrid",
        "p3/widget/PathwayGridContainer",
        "p3/widget/PathwayMapGrid",
        "p3/widget/PathwayServiceGrid",
        "p3/widget/PathwayServiceGridContainer",
        "p3/widget/PathwaysMemoryGrid",
        "p3/widget/PathwaysMemoryGridContainer",
        "p3/widget/PathwaysServiceMemoryGridContainer",
        "p3/widget/PathwaySummaryGrid",
        "p3/widget/PathwaySummaryGridContainer",
        "p3/widget/ProteinFamiliesFilterGrid",
        "p3/widget/ProteinFamiliesGrid",
        "p3/widget/ProteinFamiliesGridContainer",
        "p3/widget/ProteinFamiliesServiceFilterGrid",
        "p3/widget/ProteinFamiliesServiceGrid",
        "p3/widget/ProteinFamiliesServiceGridContainer",
        "p3/widget/ProteinFeaturesGrid",
        "p3/widget/ProteinFeaturesGridContainer",
        "p3/widget/ProteinGrid",
        "p3/widget/ProteinGridContainer",
        "p3/widget/ProteinStructureGrid",
        "p3/widget/ProteinStructureGridContainer",
        "p3/widget/PublicationGrid",
        "p3/widget/PublicationGridContainer",
        "p3/widget/SequenceGrid",
        "p3/widget/SequenceGridContainer",
        "p3/widget/SerologyGrid",
        "p3/widget/SerologyGridContainer",
        "p3/widget/SFVTGrid",
        "p3/widget/SFVTGridContainer",
        "p3/widget/SpecialtyGeneGrid",
        "p3/widget/SpecialtyGeneGridContainer",
        "p3/widget/SpecialtyVFGeneGrid",
        "p3/widget/SpecialtyVFGeneGridContainer",
        "p3/widget/StrainGrid",
        "p3/widget/StrainGrid_Bunyavirales",
        "p3/widget/StrainGrid_Orthomyxoviridae",
        "p3/widget/StrainGridContainer",
        "p3/widget/StrainGridContainer_Bunyavirales",
        "p3/widget/StrainGridContainer_Orthomyxoviridae",
        "p3/widget/SubsystemGrid",
        "p3/widget/SubsystemGridContainer",
        "p3/widget/SubsystemServiceMemoryGrid",
        "p3/widget/SubsystemServiceMemoryGridContainer",
        "p3/widget/SubsystemServiceOverviewMemoryGrid",
        "p3/widget/SubSystemsMemoryGrid",
        "p3/widget/SubSystemsMemoryGridContainer",
        "p3/widget/SubSystemsOverviewMemoryGrid",
        "p3/widget/SurveillanceGrid",
        "p3/widget/SurveillanceGridContainer",
        "p3/widget/TaxonGrid",
        "p3/widget/TaxonGridContainer",
        "p3/widget/TaxonomyTreeGrid",
        "p3/widget/TaxonomyTreeGridContainer",
        "p3/widget/TranscriptomicsGeneFilterGrid",
        "p3/widget/TranscriptomicsGeneGrid",
        "p3/widget/TranscriptomicsGeneGridContainer",
        "p3/widget/TSV_CSV_Grid",
        "p3/widget/TSV_CSV_GridContainer",
        "p3/widget/WorkspaceGrid"
      ],
      exclude: ["p3/layer/core"]
    }
  }
}

